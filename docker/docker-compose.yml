version: '3.8'
services:
  user-service:
    image: localhost:5000/user-service:latest
    ports:
      - "9998:9998"
    networks:
      - poc-network
    restart: on-failure
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://db:5432/user_db

  address-service:
    image: localhost:5000/address-service:latest
    ports:
      - "9999:9999"
    networks:
      - poc-network
    restart: on-failure
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://db:5432/address_db

  phonenumber-service:
    image: localhost:5000/phonenumber-service:latest
    ports:
      - "9997:9997"
    networks:
      - poc-network
    restart: on-failure
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://db:5432/phone_db

networks:
  poc-network:
    external: true